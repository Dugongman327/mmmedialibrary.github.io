<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMMedia Search</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // Simple icon components
        const Search = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        );
        
        const Film = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
                <line x1="7" y1="2" x2="7" y2="22"></line>
                <line x1="17" y1="2" x2="17" y2="22"></line>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <line x1="2" y1="7" x2="7" y2="7"></line>
                <line x1="2" y1="17" x2="7" y2="17"></line>
                <line x1="17" y1="17" x2="22" y2="17"></line>
                <line x1="17" y1="7" x2="22" y2="7"></line>
            </svg>
        );
        
        const Tv = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                <polyline points="17 2 12 7 7 2"></polyline>
            </svg>
        );
        
        const Mail = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
        );
        
        const ExternalLink = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
            </svg>
        );
        
        const Upload = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );
        
        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        function MMMediaSearch() {
          const [media, setMedia] = React.useState([]);
          const [searchTerm, setSearchTerm] = React.useState('');
          const [sortBy, setSortBy] = React.useState('sortTitle');
          const [sortOrder, setSortOrder] = React.useState('asc');
          const [showFilters, setShowFilters] = React.useState(false);
          const [showSuggestionForm, setShowSuggestionForm] = React.useState(false);
          const [suggestionTitle, setSuggestionTitle] = React.useState('');
          const [suggestionNotes, setSuggestionNotes] = React.useState('');
          const [showUpload, setShowUpload] = React.useState(false);
          const [loading, setLoading] = React.useState(true);
          const [error, setError] = React.useState(null);
          
          // Automatically load CSV file on component mount
          React.useEffect(() => {
            loadCSVFile();
          }, []);

          const loadCSVFile = () => {
            setLoading(true);
            setError(null);
            
            fetch('media-library.csv')
              .then(response => {
                if (!response.ok) {
                  throw new Error('CSV file not found. Please make sure media-library.csv is in the same folder as index.html');
                }
                return response.text();
              })
              .then(csvText => {
                Papa.parse(csvText, {
                  header: false,
                  skipEmptyLines: true,
                  complete: (results) => {
                    const parsedMedia = results.data.map((row, index) => ({
                      id: index + 1,
                      title: row[0] || '',
                      sortTitle: row[1] || row[0] || '',
                      location: row[2] || '',
                      rating: row[3] || 'N/A',
                      audio: row[4] || '',
                      is4K: row[5]?.toLowerCase() === 'yes',
                      runtime: parseInt(row[6]) || 0,
                      discType: row[7] || 'None',
                      type: row[8]?.toLowerCase() === 'tv' ? 'tv' : 'movie',
                      year: parseInt(row[9]) || 0,
                      seriesTitle: row[10] || null,
                      url: generateUrl(row[2], index + 1)
                    }));
                    setMedia(parsedMedia);
                    setLoading(false);
                  },
                  error: (error) => {
                    setError('Error parsing CSV file: ' + error.message);
                    setLoading(false);
                  }
                });
              })
              .catch(err => {
                setError(err.message);
                setLoading(false);
                setShowUpload(true);
              });
          };
          
          const [filters, setFilters] = React.useState({
            type: [],
            location: [],
            rating: [],
            audio: [],
            is4K: null,
            discType: [],
            yearMin: '',
            yearMax: ''
          });

          const handleFileUpload = (event) => {
            const file = event.target.files[0];
            if (!file) return;

            Papa.parse(file, {
              header: false,
              skipEmptyLines: true,
              complete: (results) => {
                const parsedMedia = results.data.map((row, index) => {
                  return {
                    id: index + 1,
                    title: row[0] || '',
                    sortTitle: row[1] || row[0] || '',
                    location: row[2] || '',
                    rating: row[3] || 'N/A',
                    audio: row[4] || '',
                    is4K: row[5]?.toLowerCase() === 'yes',
                    runtime: parseInt(row[6]) || 0,
                    discType: row[7] || 'None',
                    type: row[8]?.toLowerCase() === 'tv' ? 'tv' : 'movie',
                    year: parseInt(row[9]) || 0,
                    seriesTitle: row[10] || null,
                    url: generateUrl(row[2], index + 1)
                  };
                });
                
                setMedia(parsedMedia);
                setShowUpload(false);
              },
              error: (error) => {
                alert('Error parsing CSV file: ' + error.message);
              }
            });
          };

          const generateUrl = (location, id) => {
            if (location === 'Plex') return `plex://media/${id}`;
            if (location === 'Play Movies') return 'https://play.google.com/store/movies';
            if (location === 'Movies Anywhere') return 'https://moviesanywhere.com';
            if (location === 'Google Drive') return 'https://drive.google.com';
            if (location === 'Physical Media Only' || location === 'DVD' || location === 'Blu-ray') return null;
            return null;
          };

          const filterOptions = React.useMemo(() => ({
            types: [...new Set(media.map(m => m.type))],
            locations: [...new Set(media.map(m => m.location))],
            ratings: [...new Set(media.map(m => m.rating))],
            audioFormats: [...new Set(media.map(m => m.audio))],
            discTypes: [...new Set(media.map(m => m.discType))]
          }), [media]);

          const toggleFilter = (filterType, value) => {
            setFilters(prev => {
              const currentValues = prev[filterType];
              if (currentValues.includes(value)) {
                return { ...prev, [filterType]: currentValues.filter(v => v !== value) };
              } else {
                return { ...prev, [filterType]: [...currentValues, value] };
              }
            });
          };

          const filteredAndSortedMedia = React.useMemo(() => {
            let result = media.filter(item => {
              const matchesSearch = item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                   (item.seriesTitle && item.seriesTitle.toLowerCase().includes(searchTerm.toLowerCase()));
              
              const matchesType = filters.type.length === 0 || filters.type.includes(item.type);
              const matchesLocation = filters.location.length === 0 || filters.location.includes(item.location);
              const matchesRating = filters.rating.length === 0 || filters.rating.includes(item.rating);
              const matchesAudio = filters.audio.length === 0 || filters.audio.includes(item.audio);
              const matches4K = filters.is4K === null || item.is4K === filters.is4K;
              const matchesDiscType = filters.discType.length === 0 || filters.discType.includes(item.discType);
              const matchesYearMin = !filters.yearMin || item.year >= parseInt(filters.yearMin);
              const matchesYearMax = !filters.yearMax || item.year <= parseInt(filters.yearMax);
              
              return matchesSearch && matchesType && matchesLocation && matchesRating && 
                     matchesAudio && matches4K && matchesDiscType && matchesYearMin && matchesYearMax;
            });

            result.sort((a, b) => {
              let aVal = a[sortBy];
              let bVal = b[sortBy];
              
              if (sortBy === 'sortTitle' || sortBy === 'title') {
                aVal = aVal.toLowerCase();
                bVal = bVal.toLowerCase();
              }
              
              if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;
              if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;
              return 0;
            });

            return result;
          }, [media, searchTerm, sortBy, sortOrder, filters]);

          const handleSort = (field) => {
            if (sortBy === field) {
              setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');
            } else {
              setSortBy(field);
              setSortOrder('asc');
            }
          };

          const handleSuggestionSubmit = () => {
            if (!suggestionTitle.trim()) {
              alert('Please enter a title');
              return;
            }
            
            const emailSubject = encodeURIComponent(`Media Suggestion: ${suggestionTitle}`);
            const emailBody = encodeURIComponent(
              `Title: ${suggestionTitle}\n\nNotes:\n${suggestionNotes}`
            );
            const mailtoLink = `mailto:your-email@example.com?subject=${emailSubject}&body=${emailBody}`;
            window.location.href = mailtoLink;
            
            setSuggestionTitle('');
            setSuggestionNotes('');
            setShowSuggestionForm(false);
          };

          const clearFilters = () => {
            setFilters({
              type: [],
              location: [],
              rating: [],
              audio: [],
              is4K: null,
              discType: [],
              yearMin: '',
              yearMax: ''
            });
          };

          const activeFilterCount = 
            filters.type.length + 
            filters.location.length + 
            filters.rating.length + 
            filters.audio.length + 
            (filters.is4K !== null ? 1 : 0) + 
            filters.discType.length + 
            (filters.yearMin ? 1 : 0) + 
            (filters.yearMax ? 1 : 0);

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
              <div className="container mx-auto px-4 py-8 max-w-7xl">
                <div className="text-center mb-8">
                  <h1 className="text-4xl font-bold text-white mb-2">MMMedia Search</h1>
                  <p className="text-purple-200">Fun must be always:-&rpar;&rpar;</p>
                </div>

                {showUpload && media.length === 0 && (
                  <div className="bg-white/10 backdrop-blur-lg rounded-xl p-8 mb-6 shadow-2xl text-center">
                    <Upload className="mx-auto mb-4 text-purple-400" size={48} />
                    <h2 className="text-2xl font-bold text-white mb-4">Upload Your Media Library</h2>
                    <p className="text-purple-200 mb-6">
                      The automatic CSV load failed. You can manually upload your media-library.csv file
                    </p>
                    <label className="inline-block px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-all cursor-pointer shadow-lg">
                      <input
                        type="file"
                        accept=".csv"
                        onChange={handleFileUpload}
                        className="hidden"
                      />
                      Choose CSV File
                    </label>
                    <div className="mt-6 text-sm text-purple-300">
                      <p className="font-semibold mb-2">CSV Format (no headers):</p>
                      <p className="font-mono text-xs">
                        Title, Sort Title, Location, Rating, Audio, 4K (Yes/No), Runtime, Disc Type, Type (Movie/TV), Year, Series Title
                      </p>
                    </div>
                  </div>
                )}
                  <>
                    <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-6 shadow-2xl">
                      <div className="flex flex-col md:flex-row gap-4 mb-4">
                        <div className="flex-1 relative">
                          <Search className="absolute left-3 top-3 text-purple-300" size={20} />
                          <input
                            type="text"
                            placeholder="Search titles..."
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className="w-full pl-10 pr-4 py-3 rounded-lg bg-white/20 text-white placeholder-purple-200 border border-purple-300/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                          />
                        </div>
                        <div className="flex gap-2">
                          <button
                            onClick={() => setShowFilters(!showFilters)}
                            className="px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-all flex items-center gap-2"
                          >
                            <Search size={18} />
                            Filters {activeFilterCount > 0 && `(${activeFilterCount})`}
                          </button>
                          <button
                            onClick={() => setShowSuggestionForm(!showSuggestionForm)}
                            className="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-all flex items-center gap-2 shadow-lg"
                          >
                            <Mail size={18} />
                            Suggest
                          </button>
                          <label className="px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-all flex items-center gap-2 shadow-lg cursor-pointer">
                            <Upload size={18} />
                            <input
                              type="file"
                              accept=".csv"
                              onChange={handleFileUpload}
                              className="hidden"
                            />
                            Upload
                          </label>
                        </div>
                      </div>

                      <div className="flex flex-wrap gap-2">
                        <span className="text-purple-200 py-2">Sort by:</span>
                        {[
                          { field: 'sortTitle', label: 'Title' },
                          { field: 'year', label: 'Year' },
                          { field: 'rating', label: 'Rating' },
                          { field: 'runtime', label: 'Runtime' },
                          { field: 'type', label: 'Type' }
                        ].map(({ field, label }) => (
                          <button
                            key={field}
                            onClick={() => handleSort(field)}
                            className={`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-1 ${
                              sortBy === field
                                ? 'bg-purple-500 text-white'
                                : 'bg-white/20 text-purple-100 hover:bg-white/30'
                            }`}
                          >
                            {label}
                            {sortBy === field && (
                              <span className="text-xs">{sortOrder === 'asc' ? '↑' : '↓'}</span>
                            )}
                          </button>
                        ))}
                      </div>
                    </div>

                    {showFilters && (
                      <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-6 shadow-2xl">
                        <div className="flex justify-between items-center mb-4">
                          <h2 className="text-2xl font-bold text-white">Filters</h2>
                          <button
                            onClick={clearFilters}
                            className="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-all"
                          >
                            Clear All
                          </button>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                          {filterOptions.types.length > 0 && (
                            <div>
                              <h3 className="text-purple-200 font-medium mb-2">Type</h3>
                              <div className="space-y-2">
                                {filterOptions.types.map(type => (
                                  <label key={type} className="flex items-center gap-2 text-white cursor-pointer">
                                    <input
                                      type="checkbox"
                                      checked={filters.type.includes(type)}
                                      onChange={() => toggleFilter('type', type)}
                                      className="w-4 h-4"
                                    />
                                    <span className="capitalize">{type}</span>
                                  </label>
                                ))}
                              </div>
                            </div>
                          )}

                          {filterOptions.locations.length > 0 && (
                            <div>
                              <h3 className="text-purple-200 font-medium mb-2">Location</h3>
                              <div className="space-y-2 max-h-48 overflow-y-auto">
                                {filterOptions.locations.map(location => (
                                  <label key={location} className="flex items-center gap-2 text-white cursor-pointer">
                                    <input
                                      type="checkbox"
                                      checked={filters.location.includes(location)}
                                      onChange={() => toggleFilter('location', location)}
                                      className="w-4 h-4"
                                    />
                                    <span>{location}</span>
                                  </label>
                                ))}
                              </div>
                            </div>
                          )}

                          {filterOptions.ratings.length > 0 && (
                            <div>
                              <h3 className="text-purple-200 font-medium mb-2">Rating</h3>
                              <div className="space-y-2 max-h-48 overflow-y-auto">
                                {filterOptions.ratings.map(rating => (
                                  <label key={rating} className="flex items-center gap-2 text-white cursor-pointer">
                                    <input
                                      type="checkbox"
                                      checked={filters.rating.includes(rating)}
                                      onChange={() => toggleFilter('rating', rating)}
                                      className="w-4 h-4"
                                    />
                                    <span>{rating}</span>
                                  </label>
                                ))}
                              </div>
                            </div>
                          )}

                          {filterOptions.audioFormats.length > 0 && (
                            <div>
                              <h3 className="text-purple-200 font-medium mb-2">Audio Format</h3>
                              <div className="space-y-2 max-h-48 overflow-y-auto">
                                {filterOptions.audioFormats.map(audio => (
                                  <label key={audio} className="flex items-center gap-2 text-white cursor-pointer">
                                    <input
                                      type="checkbox"
                                      checked={filters.audio.includes(audio)}
                                      onChange={() => toggleFilter('audio', audio)}
                                      className="w-4 h-4"
                                    />
                                    <span>{audio}</span>
                                  </label>
                                ))}
                              </div>
                            </div>
                          )}

                          {filterOptions.discTypes.length > 0 && (
                            <div>
                              <h3 className="text-purple-200 font-medium mb-2">Disc Type</h3>
                              <div className="space-y-2 max-h-48 overflow-y-auto">
                                {filterOptions.discTypes.map(discType => (
                                  <label key={discType} className="flex items-center gap-2 text-white cursor-pointer">
                                    <input
                                      type="checkbox"
                                      checked={filters.discType.includes(discType)}
                                      onChange={() => toggleFilter('discType', discType)}
                                      className="w-4 h-4"
                                    />
                                    <span>{discType}</span>
                                  </label>
                                ))}
                              </div>
                            </div>
                          )}

                          <div>
                            <h3 className="text-purple-200 font-medium mb-2">4K Quality</h3>
                            <div className="space-y-2">
                              <label className="flex items-center gap-2 text-white cursor-pointer">
                                <input
                                  type="radio"
                                  checked={filters.is4K === null}
                                  onChange={() => setFilters(prev => ({ ...prev, is4K: null }))}
                                  className="w-4 h-4"
                                />
                                <span>All</span>
                              </label>
                              <label className="flex items-center gap-2 text-white cursor-pointer">
                                <input
                                  type="radio"
                                  checked={filters.is4K === true}
                                  onChange={() => setFilters(prev => ({ ...prev, is4K: true }))}
                                  className="w-4 h-4"
                                />
                                <span>4K Only</span>
                              </label>
                              <label className="flex items-center gap-2 text-white cursor-pointer">
                                <input
                                  type="radio"
                                  checked={filters.is4K === false}
                                  onChange={() => setFilters(prev => ({ ...prev, is4K: false }))}
                                  className="w-4 h-4"
                                />
                                <span>Non-4K Only</span>
                              </label>
                            </div>
                          </div>

                          <div className="md:col-span-2 lg:col-span-3">
                            <h3 className="text-purple-200 font-medium mb-2">Year Range</h3>
                            <div className="flex gap-4">
                              <input
                                type="number"
                                placeholder="Min Year"
                                value={filters.yearMin}
                                onChange={(e) => setFilters(prev => ({ ...prev, yearMin: e.target.value }))}
                                className="flex-1 px-4 py-2 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-purple-300/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                              />
                              <input
                                type="number"
                                placeholder="Max Year"
                                value={filters.yearMax}
                                onChange={(e) => setFilters(prev => ({ ...prev, yearMax: e.target.value }))}
                                className="flex-1 px-4 py-2 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-purple-300/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    )}

                    {showSuggestionForm && (
                      <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 mb-6 shadow-2xl">
                        <h2 className="text-2xl font-bold text-white mb-4">Suggest a Movie or TV Show</h2>
                        <div className="space-y-4">
                          <div>
                            <label className="block text-purple-200 mb-2">Title</label>
                            <input
                              type="text"
                              value={suggestionTitle}
                              onChange={(e) => setSuggestionTitle(e.target.value)}
                              placeholder="Enter movie or TV show title"
                              className="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-purple-300/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                            />
                          </div>
                          <div>
                            <label className="block text-purple-200 mb-2">Additional Notes (Optional)</label>
                            <textarea
                              value={suggestionNotes}
                              onChange={(e) => setSuggestionNotes(e.target.value)}
                              placeholder="Why you'd like to watch this, where it's available, etc."
                              rows={4}
                              className="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-purple-300/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                            />
                          </div>
                          <div className="flex gap-3">
                            <button
                              onClick={handleSuggestionSubmit}
                              className="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-all shadow-lg"
                            >
                              Send Suggestion
                            </button>
                            <button
                              onClick={() => setShowSuggestionForm(false)}
                              className="px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-all"
                            >
                              Cancel
                            </button>
                          </div>
                        </div>
                      </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                      {filteredAndSortedMedia.map((item) => (
                        <div
                          key={item.id}
                          className="bg-white/10 backdrop-blur-lg rounded-xl p-6 shadow-2xl hover:shadow-purple-500/20 transition-all hover:scale-105"
                        >
                          <div className="flex items-start justify-between mb-3">
                            <div className="flex items-center gap-2">
                              {item.type === 'movie' ? (
                                <Film className="text-purple-400" size={24} />
                              ) : (
                                <Tv className="text-purple-400" size={24} />
                              )}
                              <span className="text-xs font-medium text-purple-300 uppercase">
                                {item.type}
                              </span>
                            </div>
                            <div className="flex flex-col items-end gap-1">
                              <span className="px-3 py-1 bg-white/20 rounded-full text-xs font-medium text-white">
                                {item.rating}
                              </span>
                              {item.is4K && (
                                <span className="px-3 py-1 bg-blue-500 rounded-full text-xs font-bold text-white">
                                  4K
                                </span>
                              )}
                            </div>
                          </div>
                          
                          <h3 className="text-xl font-bold text-white mb-2">{item.title}</h3>
                          
                          <div className="space-y-2 mb-4 text-sm">
                            <div className="flex justify-between text-purple-200">
                              <span>Year:</span>
                              <span className="text-white font-medium">{item.year}</span>
                            </div>
                            {item.runtime > 0 && (
                              <div className="flex justify-between text-purple-200">
                                <span>Runtime:</span>
                                <span className="text-white font-medium">{item.runtime} min</span>
                              </div>
                            )}
                            <div className="flex justify-between text-purple-200">
                              <span>Audio:</span>
                              <span className="text-white font-medium">{item.audio}</span>
                            </div>
                            {item.discType && item.discType.toLowerCase() !== 'none' && (
                              <div className="flex justify-between text-purple-200">
                                <span>Disc:</span>
                                <span className="text-white font-medium">{item.discType}</span>
                              </div>
                            )}
                            {item.seriesTitle && (
                              <div className="flex justify-between text-purple-200">
                                <span>Series:</span>
                                <span className="text-white font-medium">{item.seriesTitle}</span>
                              </div>
                            )}
                          </div>
                          
                          <button
                            onClick={() => item.url && window.open(item.url, '_blank')}
                            disabled={!item.url}
                            className={`w-full px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-between ${
                              item.url
                                ? 'bg-purple-500 hover:bg-purple-600 text-white shadow-lg cursor-pointer'
                                : 'bg-gray-600 text-gray-300 cursor-not-allowed'
                            }`}
                          >
                            <span>{item.location}</span>
                            {item.url && <ExternalLink size={16} />}
                          </button>
                        </div>
                      ))}
                    </div>

                    {filteredAndSortedMedia.length === 0 && (
                      <div className="text-center py-12">
                        <p className="text-purple-200 text-lg">No media found matching your criteria.</p>
                      </div>
                    )}

                    <div className="mt-8 text-center text-purple-300 text-sm">
                      <p>Showing {filteredAndSortedMedia.length} of {media.length} titles</p>
                    </div>
                  </>
                )}
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MMMediaSearch />);
    </script>
</body>
</html>
